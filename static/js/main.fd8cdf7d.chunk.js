(this["webpackJsonpstock-tax"]=this["webpackJsonpstock-tax"]||[]).push([[0],{13:function(e,t,c){e.exports={wrapper:"Stock_wrapper__fFEMu",stockList:"Stock_stockList__3vrDF",title:"Stock_title__S165Z",transaction:"Stock_transaction__dYrjW",select:"Stock_select__103TF",inputFieldWrapper:"Stock_inputFieldWrapper__2fdue",currentHolding:"Stock_currentHolding__2H0ZX"}},52:function(e,t,c){e.exports={actionLink:"ActionLink_actionLink__3v4HY"}},68:function(e,t,c){},69:function(e,t,c){},70:function(e,t,c){},73:function(e,t,c){},74:function(e,t,c){"use strict";c.r(t);var n=c(0),a=c(8),r=c.n(a),i=c(18),s=c(51),l=c(23),o=c(7),j=c(29),d=Object(j.b)({name:"stock",initialState:{},reducers:{addStock:function(e,t){e[t.payload]=[]},removeStock:function(e,t){delete e[t.payload]},addTransaction:function(e,t){var c=t.payload;e[c.stock].push(c.transaction)},removeTransaction:function(e,t){var c=t.payload;e[c.stock].splice(c.index,1)}}}),u=d.actions,b=u.addStock,O=u.removeStock,h=u.addTransaction,p=u.removeTransaction,x=d.reducer,f=c(31),m=c.n(f),v=c(41),g=function(){var e=Object(v.a)(m.a.mark((function e(t){var c,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.exchangeratesapi.io/".concat(t,"?base=USD&symbols=BGN"));case 2:return c=e.sent,e.next=5,c.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=c(15),y=c(32),N=c.n(y),w=c(110),S=c(113),F=c(111),_=c(106),B=c(2),L=function(e){var t=e.label,c=e.value,n=void 0===c?[]:c,a=e.onValueSelected,r=e.options,i=e.className,s=Object(k.a)(e,["label","value","onValueSelected","options","className"]);return Object(B.jsxs)(_.a,{fullWidth:!0,variant:"outlined",className:i,children:[Object(B.jsx)(S.a,{children:t}),Object(B.jsx)(w.a,Object(o.a)(Object(o.a)({value:n,onChange:function(e){a(e.target.value)},label:t},s),{},{children:r.map((function(e){return"string"===typeof e?Object(B.jsx)(F.a,{value:e,className:N()({"main-option":"[ALL]"===e}),children:e},e):Object(B.jsx)(F.a,{value:e.value,className:N()({"main-option":"[ALL]"===e}),children:e.label},e.value)}))}))]})},P=function(e){var t=e.href,c=e.children,n=Object(k.a)(e,["href","children"]);return t?Object(B.jsx)("a",Object(o.a)(Object(o.a)({href:t},n),{},{children:c})):Object(B.jsx)("button",Object(o.a)(Object(o.a)({type:"button"},n),{},{children:c}))},C=(c(68),function(e){var t=e.label,c=e.theme,n=void 0===c?"default":c,a=e.className,r=void 0===a?"":a,i=e.disabled,s=void 0!==i&&i,l=Object(k.a)(e,["label","theme","className","disabled"]);return Object(B.jsx)(P,Object(o.a)(Object(o.a)({disabled:s,className:"brand-button ".concat(n," ").concat(r)},l),{},{children:Object(B.jsx)("div",{children:t})}))}),D=c(52),H=c.n(D),A=function(e){var t=e.label,c=Object(k.a)(e,["label"]);return Object(B.jsx)("button",Object(o.a)(Object(o.a)({type:"button",className:H.a.actionLink},c),{},{children:t}))},W=c(40),M=c(112),Y=(c(69),function(e){var t=e.type,c=void 0===t?"text":t,a=e.label,r=e.placeholder,i=void 0===r?"":r,s=e.icon,j=e.isMandatory,d=void 0===j||j,u=e.className,b=e.background,O=e.error,h=e.onEnter,p=Object(k.a)(e,["type","label","placeholder","icon","isMandatory","className","background","error","onEnter"]),x=Object(n.useState)(!1),f=Object(l.a)(x,2),m=f[0],v=f[1],g=Object(n.useMemo)((function(){return Object(M.a)()}),[]);return Object(B.jsxs)("div",{className:N()("input-field-wrapper",Object(W.a)({error:O},u,u)),children:[a&&Object(B.jsxs)("label",{htmlFor:g,children:[a,d&&Object(B.jsx)("span",{className:"mandatory-indicator",children:" *"})]}),Object(B.jsxs)("div",{className:N()("input-field",{active:m}),children:[Object(B.jsx)("div",{className:"icon",children:Object(B.jsx)("div",{className:"inner-icon",style:{background:b},children:Object(B.jsx)("img",{src:s,alt:""})})}),Object(B.jsx)("div",{className:"field",children:Object(B.jsx)("div",{className:"inner-field",children:Object(B.jsx)("input",Object(o.a)({type:c,placeholder:i,onFocus:function(){v(!0)},onBlur:function(){v(!1)},id:g,onKeyPress:function(e){13===e.charCode&&h&&h()},style:{background:b}},p))})})]}),O&&Object(B.jsx)("div",{className:"error-message",children:O})]})}),E=c.p+"static/media/dollar.749051ca.svg",T=c.p+"static/media/calendar.27a21ffb.svg",G=c.p+"static/media/one.d8e6104f.svg",U=c(13),I=c.n(U),V={type:"buy",count:"",price:"",date:""},J=function(e){var t=e.split("/"),c=Object(l.a)(t,3),n=c[0],a=c[1],r=c[2];return"".concat(r,"-").concat(n,"-").concat(a)},R=function(e){var t=e.split("/"),c=Object(l.a)(t,3),n=c[0],a=c[1],r=c[2];return"".concat(a,".").concat(n,".").concat(r)},Z=function(e){var t=e.stockName,c=Object(i.b)(),a=Object(i.c)((function(e){return e.stock[t]})),r=Object(i.c)((function(e){return function(e,t){for(var c=e[t].map((function(e){return Object(o.a)(Object(o.a)({},e),{},{price:Number(e.price),priceBgn:Number(e.priceBgn),count:Number(e.count),realDate:new Date(e.date)})})).sort((function(e,t){return e<t?-1:1})),n=[],a=null,r=0,i=0,s=0,l=0;l<c.length;l+=1)if("buy"===c[l].type&&(r+=c[l].price,i+=c[l].priceBgn,s+=c[l].count),"sell"===c[l].type){var j=r/s,d=i/s,u=j*c[l].count,b=d*c[l].count;n.push({avgPrice:j,avgPriceBgn:d,taxBuyPrice:u,taxBuyPriceBgn:b,sell:c[l]}),r=j*(s-=c[l].count),i=d*s}return s>0&&(a={avgPrice:r/s,count:s,current:!0}),{taxSells:n,currentHolding:a}}(e.stock,t)})),s=Object(n.useState)(V),j=Object(l.a)(s,2),d=j[0],u=j[1],b=function(){var e=Object(v.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d.date&&d.price&&d.count){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,g(J(d.date));case 4:n=e.sent,a=n.rates,c(h({stock:t,transaction:Object(o.a)(Object(o.a)({},d),{},{priceBgn:d.price*a.BGN})})),u(V);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(B.jsxs)("li",{children:[Object(B.jsxs)("div",{className:I.a.title,children:[t,Object(B.jsx)(A,{label:"Remove",onClick:function(){c(O(t))}})]}),a.length>0&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("h2",{children:"\u0422\u0440\u0430\u043d\u0437\u0430\u043a\u0446\u0438\u0438:"}),Object(B.jsx)("table",{children:Object(B.jsx)("tbody",{children:a.map((function(e,n){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{children:e.type}),Object(B.jsx)("td",{children:e.date}),Object(B.jsxs)("td",{children:["$",e.price]}),Object(B.jsxs)("td",{children:[e.priceBgn.toFixed(2)," \u043b\u0432."]}),Object(B.jsxs)("td",{children:[e.count," stocks"]}),Object(B.jsx)("td",{children:Object(B.jsx)(A,{label:"Remove",onClick:function(){!function(e){c(p({stock:t,index:e}))}(n)}})})]},e.date)}))})})]}),r.taxSells.length>0&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("h2",{children:"\u0417\u0430 \u0434\u0435\u043a\u043b\u0430\u0440\u0438\u0440\u0430\u043d\u0435 \u0432 \u041f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u0435 5 \u043d\u0430 \u041d\u0410\u041f (\u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430 \u043d\u0430 \u0430\u043a\u0446\u0438\u0438):"}),Object(B.jsxs)("table",{children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{children:"\u0434\u0430\u0442\u0430"}),Object(B.jsx)("th",{children:"\u041f\u0440\u043e\u0434\u0430\u0436\u043d\u0430 \u0446\u0435\u043d\u0430"}),Object(B.jsx)("th",{children:"(USD)"}),Object(B.jsx)("th",{children:"\u0426\u0435\u043d\u0430 \u043d\u0430 \u043f\u0440\u0438\u0434\u043e\u0431\u0438\u0432\u0430\u043d\u0435"}),Object(B.jsx)("th",{children:"(USD)"}),Object(B.jsx)("th",{children:"(\u0421\u0440\u0435\u0434\u043d\u0430 \u0446\u0435\u043d\u0430 \u043d\u0430 \u0430\u043a\u0446\u0438\u044f)"})]})}),Object(B.jsx)("tbody",{children:r.taxSells.map((function(e){return Object(B.jsxs)("tr",{children:[Object(B.jsx)("td",{children:Object(B.jsx)("strong",{children:R(e.sell.date)})}),Object(B.jsx)("td",{children:Object(B.jsx)("strong",{children:e.sell.priceBgn.toFixed(2)})}),Object(B.jsx)("td",{children:e.sell.price.toFixed(2)}),Object(B.jsx)("td",{children:Object(B.jsx)("strong",{children:e.taxBuyPriceBgn.toFixed(2)})}),Object(B.jsx)("td",{children:e.taxBuyPrice.toFixed(2)}),Object(B.jsxs)("td",{children:["$",e.avgPrice.toFixed(2)," [",e.avgPriceBgn.toFixed(2)," \u043b\u0432.]"]})]},e.sell.date)}))})]})]}),r.currentHolding&&Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)("h2",{children:"\u041f\u0440\u0438\u0442\u0435\u0436\u0430\u0432\u0430\u043d\u0438 \u0432 \u043c\u043e\u043c\u0435\u043d\u0442\u0430:"}),Object(B.jsxs)("div",{className:I.a.currentHolding,children:["\u0422\u0435\u043a\u0443\u0449\u0430 \u0441\u0440\u0435\u0434\u043d\u0430 \u0446\u0435\u043d\u0430: ",Object(B.jsx)("strong",{children:r.currentHolding.avgPrice.toFixed(2)}),", \u0422\u0435\u043a\u0443\u0449 \u0431\u0440\u043e\u0439 \u0434\u044f\u043b\u043e\u0432\u0435: ",Object(B.jsx)("strong",{children:r.currentHolding.count})]})]}),Object(B.jsxs)("div",{className:I.a.transaction,children:[Object(B.jsx)(L,{className:I.a.select,label:"buy / sell",onValueSelected:function(e){u((function(t){return Object(o.a)(Object(o.a)({},t),{},{type:e})}))},value:d.type,options:[{value:"buy",label:"buy"},{value:"sell",label:"sell"}]}),Object(B.jsx)(Y,{placeholder:"\u0411\u0440\u043e\u0439 \u0430\u043a\u0446\u0438\u0438",icon:G,className:I.a.inputFieldWrapper,value:d.count,onChange:function(e){u((function(t){return Object(o.a)(Object(o.a)({},t),{},{count:e.target.value})}))}}),Object(B.jsx)(Y,{placeholder:"[USD] \u0426\u0435\u043d\u0430 \u043d\u0430 ".concat("buy"===d.type?"\u043f\u0440\u0438\u0434\u043e\u0431\u0438\u0432\u0430\u043d\u0435":"\u043f\u0440\u043e\u0434\u0430\u0436\u0431\u0430"),icon:E,className:I.a.inputFieldWrapper,value:d.price,onChange:function(e){u((function(t){return Object(o.a)(Object(o.a)({},t),{},{price:e.target.value.replace(/,/g,"")})}))}}),Object(B.jsx)(Y,{placeholder:"MM/DD/YYYY \u0434\u0430\u0442\u0430",icon:T,className:I.a.inputFieldWrapper,value:d.date,onChange:function(e){u((function(t){return Object(o.a)(Object(o.a)({},t),{},{date:e.target.value})}))}}),Object(B.jsx)(C,{label:"Add",theme:"primary",onClick:b})]})]})},$=c.p+"static/media/money-graph-with-up-arrow.431dad77.svg",K=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.stock})),c=Object(n.useState)(""),a=Object(l.a)(c,2),r=a[0],s=a[1];return Object(B.jsxs)("div",{className:I.a.wrapper,children:[Object(B.jsx)(Y,{placeholder:"Stock name",icon:$,value:r,onChange:function(e){s(e.target.value)},onEnter:function(){e(b(r)),s("")}}),Object(B.jsx)("ul",{className:I.a.stockList,children:Object.keys(t).map((function(e){return Object(B.jsx)(Z,{stockName:e},e)}))})]})};c(70);var X=function(){return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)(K,{}),Object(B.jsxs)("div",{className:"attribution",children:[Object(B.jsxs)("div",{children:["Icons made by ",Object(B.jsx)("a",{href:"https://www.freepik.com",title:"Freepik",children:"Freepik"})," from ",Object(B.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]}),Object(B.jsxs)("div",{children:["Icons made by ",Object(B.jsx)("a",{href:"https://www.flaticon.com/authors/google",title:"Google",children:"Google"})," from ",Object(B.jsx)("a",{href:"https://www.flaticon.com/",title:"Flaticon",children:"www.flaticon.com"})]})]})]})},q=c(48),z=c(53),Q=c.n(z),ee=c(11),te=Object(j.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),ce=te.actions,ne=(ce.increment,ce.decrement,ce.incrementByAmount,te.reducer),ae=Object(ee.c)({counter:ne,stock:x}),re={key:"root",storage:Q.a},ie=Object(q.a)(re,ae),se=Object(j.a)({reducer:ie}),le=Object(q.b)(se),oe=se;c(73);r.a.render(Object(B.jsx)(i.a,{store:oe,children:Object(B.jsx)(s.a,{loading:null,persistor:le,children:Object(B.jsx)(X,{})})}),document.getElementById("root"))}},[[74,1,2]]]);
//# sourceMappingURL=main.fd8cdf7d.chunk.js.map